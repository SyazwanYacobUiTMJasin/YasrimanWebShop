<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fmt="http://java.sun.com/jsp/jstl/fmt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yasriman | Update Order</title>
    <link rel="stylesheet" th:href="@{/css/order.css}" />
    <link rel="stylesheet" th:href="@{/css/animation.css}" />
    <link rel="stylesheet" th:href="@{/css/loading.css}" />
    <link rel="icon" th:href="@{/images/logo.jpeg}" type="image/png">
</head>
<body>
<div id="loading-screen">
    <video id="loading-video" autoplay loop muted>
        <source th:src="@{/video/loadingscreen.mp4}" type="video/mp4">
    </video>
</div>
<div class="navbarbg">
    <a th:href="@{/index}">
        <h2>YASRIMAN</h2>
    </a>
    <div class="navlinks">
        <a th:href="@{/index}">HOME</a>
    </div>
</div>
<div id="hero">
    <div id="sidebar">
        <b>NAV LINKS</b>
        <ul>
            <br>
            <li><a th:href="@{/staffdashboard}">Dashboard</a></li>
            <li><a th:href="@{/listallaccounts}">Accounts</a></li>
            <li><a href="./inventory.html">Inventory</a></li>
            <li><a th:href="@{/order?action=view}">Orders</a></li>
            <!-- Add more navigation links as needed -->
        </ul>
    </div>
    <div class="hero fade-in-up delay-1">
        <div class="topbar">
            <h1>Update Order Details</h1>
            <a class="btn btn-info edit-btn" th:href="@{/order?action=view}">Back</a>
        </div>
        <div class="table-container">
            <form class="formcontent" th:action="@{/order?action=update&orderid=${order.orderId}}" method="post">
                <table border="1">
                    <tr>
                        <th>Order ID</th>
                        <th>Account ID</th>
                        <th>Account Username</th>
                    </tr>
                    <tr>
                        <td><input type="text" name="orderId" th:value="${order.orderId}" readonly /></td>
                        <td><input type="text" name="accountId" th:value="${order.accountId}" readonly /></td>
                        <td><input type="text" name="accountUsername" th:value="${order.accountUsername}" readonly /></td>
                    </tr>
                    <tr class="space"></tr><tr class="space"></tr>
                    <tr>
                        <th>Inventory ID</th>
                        <th>Inventory Name</th>
                        <th>Inventory Image</th>
                    </tr>
                    <tr>
                        <td><input type="text" name="inventoryId" th:value="${order.inventoryId}" readonly /></td>
                        <td><input type="text" name="inventoryName" th:value="${order.inventoryName}" readonly /></td>
                        <td>
                            <img th:src="'data:image/jpeg;base64,' + ${order.inventoryImage}" alt="Inventory Image" style="width:50px;height:50px;" th:if="${not #strings.isEmpty(order.inventoryImage)}" />
                        </td>
                    </tr>
                    <tr class="space"></tr><tr class="space"></tr>
                    <tr>
                        <th>Order Date</th>
                        <th>Order Status</th>
                        <th>Order Total Price</th>
                    </tr>
                    <tr>
                        <td><input type="date" name="orderDate" th:value="${order.orderDate}" readonly/></td>
                        <td>
                            <select name="orderStatus">
                                <option th:value="${order.orderStatus}" th:selected="${order.orderStatus == 'PROCESS'}">PROCESS</option>
                                <option th:value="SHIPPED" th:if="${order.orderStatus != 'SHIPPED'}">SHIPPED</option>
                                <option th:value="PACKAGING" th:if="${order.orderStatus != 'PACKAGING'}">PACKAGING</option>
                                <option th:value="CANCELLED" th:if="${order.orderStatus != 'CANCELLED'}">CANCELLED</option>
                            </select>
                        </td>
                        <td><input type="text" name="orderTotalPrice" th:value="'RM ' + ${#numbers.formatDecimal(order.orderTotalPrice, 2, 'NUMBER')}" readonly/></td>
                    </tr>
                </table>
                <br>
                <button type="submit">Update Order</button>
            </form>
        </div>
    </div>
</div>
<script src="./js/loading.js"></script>
</body>
</html>
